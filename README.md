# StockSage-AI

AI/ML-powered Indian stock market prediction, paper trading, and competitive leaderboard platform.

[![Python](https://img.shields.io/badge/Python-3.14-3776AB?style=flat&logo=python&logoColor=white)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.133-009688?style=flat&logo=fastapi&logoColor=white)](https://fastapi.tiangolo.com)
[![Next.js](https://img.shields.io/badge/Next.js-16-000000?style=flat&logo=next.js&logoColor=white)](https://nextjs.org)
[![PyTorch](https://img.shields.io/badge/PyTorch-2.10_CUDA-EE4C2C?style=flat&logo=pytorch&logoColor=white)](https://pytorch.org)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-18-4169E1?style=flat&logo=postgresql&logoColor=white)](https://postgresql.org)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Status](https://img.shields.io/badge/Status-Phase_1-blue?style=flat)]()

## What is StockSage-AI?

A platform where users **paper trade** Indian stocks (NSE/BSE) with Rs 1,00,000 virtual capital, get **AI-powered predictions** for stock price movements, **compete on leaderboards**, and **benchmark against an autonomous AI trader** -- all without risking real money.

**Target Market:** NSE (National Stock Exchange) & BSE (Bombay Stock Exchange)

> **Disclaimer:** This is for educational and entertainment purposes only. Predictions are generated by machine learning models and are NOT financial advice.

## Features

| Feature | Description |
|---------|-------------|
| **AI Prediction** | ML models predict stock price direction (UP/DOWN) with confidence scores using technical indicators + news sentiment |
| **Paper Trading** | Buy/sell NSE/BSE stocks with virtual money at real market prices |
| **Portfolio Tracker** | Holdings, P&L, transaction history, performance analytics (Sharpe ratio, win rate) |
| **Leaderboard** | Competitive rankings -- weekly, monthly, all-time periods |
| **AI Trader** | Autonomous AI agent that trades the same Rs 1,00,000 and competes on the leaderboard |

## Tech Stack

### Backend
- **API:** Python 3.14 / FastAPI / Pydantic v2 / SQLAlchemy 2.0 / Alembic
- **Auth:** PyJWT (access + refresh tokens) / pwdlib with Argon2
- **Background Jobs:** Celery + Redis (market data fetching, leaderboard updates, model retraining)
- **Database:** PostgreSQL 18 + TimescaleDB (time-series stock data) / Redis 8.6 (caching)

### ML/AI (GPU-Accelerated)
- **Models:** XGBoost (`device="cuda"`) / PyTorch LSTM (CUDA) / scikit-learn (baseline)
- **Features:** pandas-ta (technical indicators) / FinBERT (news sentiment analysis)
- **Pipeline:** MLflow (experiment tracking) / Optuna (hyperparameter tuning)
- **Training:** WSL2 + NVIDIA CUDA passthrough from Windows 11

### Frontend
- **Framework:** Next.js 16 / React 19 / TypeScript 5.9
- **Styling:** TailwindCSS v4 / shadcn/ui
- **Charts:** TradingView Lightweight Charts v5 (stock charts) / Recharts 3.x (analytics)
- **State:** Zustand 5 (client) / TanStack React Query 5 (server) / nuqs (URL state)
- **Auth:** Auth.js v5 (next-auth)

### Infrastructure
- **Dev Environment:** WSL2 (Ubuntu) on Windows 11 with NVIDIA GPU passthrough
- **Containerization:** Docker Compose v5 (PostgreSQL + Redis + API + Frontend + Celery)
- **CI/CD:** GitHub Actions (Ruff + Biome lint, pytest, type-check)
- **Deployment:** Vercel (frontend, free) / Render (backend, free) / Supabase or Neon (DB, free)
- **Tooling:** `uv` (Python packages) / `pnpm` (Node.js) / `Ruff` (Python lint) / `Biome` (TS lint)

### Free Data Sources (No API Keys Required)
- **Stock Prices:** yfinance (`.NS` suffix for NSE), jugaad-data (live NSE quotes), nsetools
- **News Sentiment:** Google News RSS (unlimited, no key), NewsAPI.org (free tier)

## Project Structure

```
StockSage-AI/
├── backend/
│   ├── app/                    # FastAPI application
│   │   ├── routers/            # API endpoints (auth, stocks, trading, portfolio, leaderboard)
│   │   ├── services/           # Business logic layer
│   │   ├── models/             # SQLAlchemy ORM models
│   │   ├── schemas/            # Pydantic request/response schemas
│   │   └── utils/              # JWT auth, market hours, exceptions
│   ├── ml/                     # ML pipeline (separate from web app)
│   │   ├── data/               # Data fetching (yfinance, jugaad-data, news RSS)
│   │   ├── features/           # Technical indicators, sentiment scores
│   │   ├── models/             # XGBoost, LSTM, ensemble definitions
│   │   ├── training/           # Training pipeline (GPU), evaluation
│   │   ├── inference/          # Model serving, Redis caching
│   │   └── artifacts/          # Saved model files (.pkl, .pt) [gitignored]
│   ├── tasks/                  # Celery background tasks
│   └── tests/                  # pytest (unit + integration)
├── frontend/
│   ├── app/                    # Next.js 16 App Router
│   │   ├── (auth)/             # Login/signup (no sidebar)
│   │   └── (dashboard)/        # Protected pages (sidebar layout)
│   ├── components/             # UI, charts, trading, portfolio, leaderboard
│   ├── hooks/                  # Custom React hooks
│   ├── stores/                 # Zustand state stores
│   └── types/                  # TypeScript type definitions
├── docker-compose.yml          # Local dev stack
└── PLAN.md                     # Comprehensive project plan (17 sections)
```

## Quick Start

### Prerequisites

- **WSL2** (Ubuntu) on Windows 11
- **NVIDIA GPU** with CUDA support (for ML training)
- **Docker Desktop** with WSL2 integration enabled
- **uv** (Python package manager)
- **pnpm** (Node.js package manager)

### Setup (Inside WSL2)

```bash
# Clone
git clone https://github.com/Sagargupta16/StockSage-AI.git
cd StockSage-AI

# Start infrastructure
docker compose up -d

# Backend
cd backend
uv venv && source .venv/bin/activate
uv pip install -r requirements.txt
uv pip install -r requirements-ml.txt    # PyTorch CUDA, XGBoost, etc.
alembic upgrade head

# Frontend
cd ../frontend
pnpm install
pnpm dev
```

**Access:**
- Frontend: http://localhost:3000
- Backend API: http://localhost:8000
- Swagger Docs: http://localhost:8000/docs

### Verify GPU

```bash
python -c "import torch; print(torch.cuda.is_available(), torch.cuda.get_device_name(0))"
```

### ML Training

```bash
# Direct (fastest for iteration)
cd backend && python -m ml.training.train

# Via Docker with GPU passthrough
docker compose --profile training run --rm ml-trainer
```

## Development Commands

| Task | Command |
|------|---------|
| Start all services | `docker compose up -d` |
| Run backend dev server | `uvicorn app.main:app --reload --port 8000` |
| Run frontend dev server | `cd frontend && pnpm dev` |
| Run migrations | `alembic upgrade head` |
| Generate migration | `alembic revision --autogenerate -m "description"` |
| Lint Python | `ruff check . && ruff format .` |
| Lint TypeScript | `pnpm biome check .` |
| Run backend tests | `pytest` |
| Run single test | `pytest tests/unit/test_trading_service.py` |
| Train ML models (GPU) | `python -m ml.training.train` |
| Build frontend | `cd frontend && pnpm build` |

## Roadmap

| Phase | Milestone | Status |
|-------|-----------|--------|
| 1 | Foundation -- project setup, auth, Docker, CI/CD | **In Progress** |
| 2 | Market data pipeline -- NSE/BSE historical + live data | Planned |
| 3 | ML prediction engine -- XGBoost/LSTM on GPU, FinBERT sentiment | Planned |
| 4 | Paper trading engine -- orders, portfolio, P&L tracking | Planned |
| 5 | Frontend dashboard -- charts, trading UI, portfolio views | Planned |
| 6 | Leaderboard + AI trader -- competition system | Planned |
| 7 | Production hardening -- deploy, security audit, monitoring | Planned |

See [PLAN.md](PLAN.md) for the full project plan with database schema, API design, ML pipeline, and implementation details.

## Cost

| Phase | Monthly Cost |
|-------|-------------|
| Development (Phase 1-6) | **$0** (all local + free tiers) |
| Production (Phase 7) | **$0 - $8/mo** (Vercel + Render + Supabase free tiers) |
| Scale (1000+ users) | **~$61/mo** |

## Contributing

This project is in early development. If you're interested in contributing, please open an issue to discuss your ideas.

## License

MIT
